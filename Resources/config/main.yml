parameters:
    user_class: Cube\CoreBundle\Entity\User

doctrine:
    dbal:
        types:
            json: Sonata\Doctrine\Types\JsonType
    orm:
        filters:
            softdeleteable:
                class: Gedmo\SoftDeleteable\Filter\SoftDeleteableFilter
                enabled: true

stof_doctrine_extensions:
    default_locale: "%locale%"
    orm:
        default:
            timestampable: true
            sluggable: true
            sortable: true
            softdeleteable: true
            translatable: true

fos_user:
    db_driver:      orm
    firewall_name:  main
    user_class:     '%user_class%'
    group:
        group_class:   Cube\CoreBundle\Entity\Group
    from_email:
        address: "%mailer_user%"
        sender_name: Cube

sonata_admin:
    title: "CUBE"
    title_logo: bundles/cubecore/img/logo.png
    templates:
        layout: 'CubeCoreBundle:sonata:admin_layout.html.twig'
    show_mosaic_button: false
    dashboard:
        blocks:
            -
                position: left
                type: sonata.admin.block.admin_list
        groups:
            sonata.admin.group.content:
                label: admin.dashboard.cms
                icon: '<i class="fa fa-th"></i>'
                label_catalogue: CubeCoreBundle
                items:
                    - sonata.media.admin.media
                    - sonata.media.admin.gallery
            sonata.admin.group.classification:
                label:           sonata_classification
                label_catalogue: SonataClassificationBundle
                icon:            '<i class="fa fa-sitemap"></i>'
                items:
                    - sonata.classification.admin.category
                    - sonata.classification.admin.tag
                    - sonata.classification.admin.context
            sonata.admin.group.administration:
                label: sonata_administration
                icon: '<i class="fa fa-cogs"></i>'
                label_catalogue: SonataAdminBundle
                items:
                    - sonata.user.admin.user
                    - sonata.user.admin.group

sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts: [admin]
        sonata.admin.block.search_result:
            contexts: [admin]

doctrine_migrations:
    table_name: migration_versions

sonata_classification:
    class:
        tag:          Cube\CoreBundle\Entity\Tag
        category:     Cube\CoreBundle\Entity\Category
        collection:   Cube\CoreBundle\Entity\Collection
        context:      Cube\CoreBundle\Entity\Context
        media:        Cube\CoreBundle\Entity\Media
    admin:
        tag:
            class:        Sonata\ClassificationBundle\Admin\TagAdmin
            controller:   SonataAdminBundle:CRUD
            translation:  SonataClassificationBundle
        category:
            class:        Cube\CoreBundle\Admin\CategoryAdmin
            controller:   SonataClassificationBundle:CategoryAdmin
            translation:  SonataClassificationBundle
        collection:
            class:        Sonata\ClassificationBundle\Admin\CollectionAdmin
            controller:   SonataAdminBundle:CRUD
            translation:  SonataClassificationBundle
        context:
            class:        Cube\CoreBundle\Admin\ContextAdmin
            controller:   SonataAdminBundle:CRUD
            translation:  SonataClassificationBundle

sonata_media:
    class:
        media: Cube\CoreBundle\Entity\Media
        gallery: Cube\CoreBundle\Entity\Gallery
        gallery_has_media: Cube\CoreBundle\Entity\GalleryHasMedia
        category: Cube\CoreBundle\Entity\Category
    default_context: default
    db_driver: doctrine_orm
    contexts:
        sonata_collection:
            providers:
              - sonata.media.provider.image

            formats:
                preview: { width: 100, quality: 100}
                wide:    { width: 820, quality: 100}

        sonata_category:
            providers:
              - sonata.media.provider.image


            formats:
                preview: { width: 100, quality: 100}
                wide:    { width: 820, quality: 100}
        default:
            providers:
                - sonata.media.provider.youtube
                - sonata.media.provider.image
                - sonata.media.provider.file
            formats:
                small: { width: 100, quality: 70 }
                big:   { width: 500, quality: 70 }
    cdn:
        server:
            path: /uploads/media
    filesystem:
        local:
            directory:  "%kernel.root_dir%/../web/uploads/media"
            create:     false

sonata_user:
    class:
        user: '%user_class%'
        group: Cube\CoreBundle\Entity\Group
    manager_type: orm
    profile:
        dashboard:
            blocks:
                - { position: left, type: sonata.block.service.text, settings: { content: "<h2>Welcome!</h2> This is a sample user profile dashboard, feel free to override it in the configuration! Want to make this text dynamic? For instance display the user's name? Create a dedicated block and edit the configuration!"} }
        menu:
            - { route: 'sonata_user_profile_show', label: 'sonata_profile_title', domain: 'SonataUserBundle'}
            - { route: 'sonata_user_profile_edit', label: 'link_edit_profile', domain: 'SonataUserBundle'}
            - { route: 'sonata_user_change_password', label: 'change_password', domain: 'SonataUserBundle'}
        form:
            type: sonata_user_profile
            handler: sonata.user.profile.form.handler.default
            name: sonata_user_profile_form
            validation_groups:
                - Profile
                - Default

sonata_block:
    default_contexts: [cms]
